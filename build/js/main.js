"use strict";

function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
(function (_sessionStorage$getIt, _Number) {
  var apiURL = 'https://fav-prom.com/api_lvlup_2025';
  var PROMO_START_DATE = new Date("2025-04-14T12:00:00");
  var currentDate = new Date();
  var weekDates = [];
  var weekNums = 0;
  var prizeFunds = ["300 000", "300 000", "400 000"];
  var formatDate = function formatDate(date) {
    return "".concat(date.getDate().toString().padStart(2, "0"), ".").concat((date.getMonth() + 1).toString().padStart(2, "0"));
  };
  for (var i = 0; i < 3; i++) {
    var start = new Date(PROMO_START_DATE.getTime() + i * 7 * 24 * 60 * 60 * 1000);
    var end = new Date(start.getTime() + 6 * 24 * 60 * 60 * 1000);
    end.setHours(23, 59, 59, 999);
    weekDates[i] = {
      start: start,
      end: end,
      period: "".concat(formatDate(start), " - ").concat(formatDate(end)),
      prizeFund: prizeFunds[i]
    };
    if (currentDate >= end) {
      weekNums++;
    }
  }
  for (var _i = 0; _i < weekDates.length; _i++) {
    if (currentDate >= weekDates[_i].start && currentDate <= weekDates[_i].end) {
      weekNums = _i + 1;
    }
  }
  if (weekNums === 0) {
    if (currentDate < weekDates[0].start) {
      console.log("Акція ще не почалась");
    } else {
      console.log("Акція вже закінчилась");
    }
  }
  console.log("Поточний тиждень:", weekNums);
  console.log("Деталі тижнів:", weekDates);
  var unauthMsgs = document.querySelectorAll('.unauth-msgs'),
    participateBtns = document.querySelectorAll('.took-part'),
    playBtns = document.querySelectorAll('.play-btn'),
    mainPage = document.querySelector(".fav-page"),
    tabsContainer = document.querySelector(".results__tabs"),
    weekAmount = document.querySelector(".results__prize-amount");
  var ukLeng = document.querySelector('#ukLeng');
  var enLeng = document.querySelector('#enLeng');
  var locale = (_sessionStorage$getIt = sessionStorage.getItem("locale")) !== null && _sessionStorage$getIt !== void 0 ? _sessionStorage$getIt : 'uk';
  // let locale =  'uk';

  if (ukLeng) locale = 'uk';
  if (enLeng) locale = 'en';
  var i18nData = {};
  var userId;
  var debug = false;
  userId = (_Number = Number(sessionStorage.getItem("userId"))) !== null && _Number !== void 0 ? _Number : 100300268;
  // userId = 100300268 ;

  var checkUserAuth = function checkUserAuth() {
    if (userId) {
      var _iterator = _createForOfIteratorHelper(unauthMsgs),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var unauthMes = _step.value;
          unauthMes.classList.add('hide');
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      request("/users").then(function (data) {
        var user = data.find(function (user) {
          return user.userid === userId;
        });
        if (user) {
          var _iterator2 = _createForOfIteratorHelper(playBtns),
            _step2;
          try {
            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
              var playBtn = _step2.value;
              playBtn.classList.remove('hide');
            }
          } catch (err) {
            _iterator2.e(err);
          } finally {
            _iterator2.f();
          }
          var _iterator3 = _createForOfIteratorHelper(participateBtns),
            _step3;
          try {
            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
              var participateBtn = _step3.value;
              participateBtn.classList.add('hide');
            }
          } catch (err) {
            _iterator3.e(err);
          } finally {
            _iterator3.f();
          }
        } else {
          var _iterator4 = _createForOfIteratorHelper(participateBtns),
            _step4;
          try {
            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
              var _participateBtn = _step4.value;
              _participateBtn.classList.remove('hide');
            }
          } catch (err) {
            _iterator4.e(err);
          } finally {
            _iterator4.f();
          }
          var _iterator5 = _createForOfIteratorHelper(playBtns),
            _step5;
          try {
            for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
              var _playBtn = _step5.value;
              _playBtn.classList.add('hide');
            }
          } catch (err) {
            _iterator5.e(err);
          } finally {
            _iterator5.f();
          }
        }
      });
    } else {
      var _iterator6 = _createForOfIteratorHelper(participateBtns),
        _step6;
      try {
        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
          var participateBtn = _step6.value;
          participateBtn.classList.add('hide');
        }
      } catch (err) {
        _iterator6.e(err);
      } finally {
        _iterator6.f();
      }
      var _iterator7 = _createForOfIteratorHelper(unauthMsgs),
        _step7;
      try {
        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
          var _unauthMes = _step7.value;
          _unauthMes.classList.remove('hide');
        }
      } catch (err) {
        _iterator7.e(err);
      } finally {
        _iterator7.f();
      }
    }
  };
  var InitPage = function InitPage() {
    checkUserAuth();
    translate();
    renderTabs(tabsContainer);
  };
  function participate() {
    if (!userId) {
      return;
    }
    var params = {
      userid: userId
    };
    console.log(params);
    fetch(apiURL + '/user/', {
      headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json'
      },
      method: 'POST',
      body: JSON.stringify(params)
    }).then(function (res) {
      return res.json();
    }).then(function (res) {
      var _iterator8 = _createForOfIteratorHelper(participateBtns),
        _step8;
      try {
        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {
          var joinBtn = _step8.value;
          joinBtn.classList.add('hide');
        }
      } catch (err) {
        _iterator8.e(err);
      } finally {
        _iterator8.f();
      }
      InitPage();
    });
  }
  function loadTranslations() {
    return fetch("".concat(apiURL, "/new-translates/").concat(locale)).then(function (res) {
      return res.json();
    }).then(function (json) {
      i18nData = json;
      translate();
      var mutationObserver = new MutationObserver(function (mutations) {
        translate();
      });
      mutationObserver.observe(document.getElementById('lvlUp'), {
        childList: true,
        subtree: true
      });
    });
  }
  function translate() {
    var elems = document.querySelectorAll('[data-translate]');
    if (elems && elems.length) {
      if (!debug) {
        elems.forEach(function (elem) {
          var key = elem.getAttribute('data-translate');
          elem.innerHTML = translateKey(key);
          elem.removeAttribute('data-translate');
        });
      } else {
        console.log("translation works!");
      }
    }
    if (locale === 'en') {
      mainPage.classList.add('en');
    }
  }
  function translateKey(key, defaultValue) {
    if (!key) {
      return;
    }
    defaultValue = defaultValue || key;
    return i18nData[key] || defaultValue;
  }
  function request(link) {
    return fetch(apiURL + link, {
      headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json'
      }
    }).then(function (res) {
      return res.json();
    });
  }
  function renderTabs(container) {
    container.innerHTML = "";
    var defaultTab = false;
    for (var _i2 = 0; _i2 < weekDates.length; _i2++) {
      var tab = document.createElement("div");
      tab.classList.add("results__tabs-item");
      tab.textContent = "".concat(weekDates[_i2].period);
      if (_i2 === weekNums - 1) {
        defaultTab = true;
        tab.classList.add("_active");
        weekAmount.textContent = "".concat(weekDates[_i2].prizeFund, " \u20B4");
      }
      tab.setAttribute("data-week", _i2 + 1);
      container.appendChild(tab);
    }
    var tabs = document.querySelectorAll('.results__tabs-item');
    console.log(defaultTab);
    if (!defaultTab) {
      tabs[0].classList.add("_active");
      weekAmount.textContent = "".concat(weekDates[0].prizeFund, " \u20B4");
    }
  }
  function init() {
    InitPage();
    if (window.store) {
      var state = window.store.getState();
      userId = state.auth.isAuthorized && state.auth.id || '';
    } else {
      var c = 0;
      var i = setInterval(function () {
        if (c < 50) {
          if (window.g_user_id) {
            userId = window.g_user_id;
            checkUserAuth();
            clearInterval(i);
          }
        } else {
          clearInterval(i);
        }
      }, 200);
    }
    var _iterator9 = _createForOfIteratorHelper(participateBtns),
      _step9;
    try {
      for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {
        var joinBtn = _step9.value;
        joinBtn.addEventListener('click', function () {
          participate();
        });
      }
    } catch (err) {
      _iterator9.e(err);
    } finally {
      _iterator9.f();
    }
    checkUserAuth();
  }
  document.addEventListener('click', function (e) {
    var tab = e.target.closest('.results__tabs-item');
    if (!tab) return;
    var allTabs = document.querySelectorAll('.results__tabs-item');
    allTabs.forEach(function (item) {
      item.classList.remove('_active');
    });
    tab.classList.add('_active');
    var tabWeek = tab.getAttribute('data-week');
    weekAmount.textContent = "".concat(weekDates[tabWeek - 1].prizeFund, " \u20B4");
    console.log(tabWeek);
  });
  loadTranslations().then(init);
  var welcomeLogo = document.querySelector(".welcome__logo"),
    welcomeText = document.querySelector(".welcome__text"),
    welcomePrize = document.querySelector(".welcome__prize");
  setTimeout(function () {
    welcomeLogo.classList.remove("topAnimHide");
    welcomeLogo.classList.add("topAnimShow");
  }, 250);
  setTimeout(function () {
    welcomeText.classList.remove("topAnimHide");
    welcomeText.classList.add("topAnimShow");
  }, 500);
  setTimeout(function () {
    welcomePrize.classList.remove("topAnimHide");
    welcomePrize.classList.add("topAnimShow");
  }, 750);

  //test

  document.querySelector(".auth-btn").addEventListener("click", function () {
    userId = Number(sessionStorage.getItem("userId")) || 0;
    if (userId === 100300268) {
      userId = 321123321;
    } else if (userId === 321123321) {
      userId = 0;
    } else {
      userId = 100300268;
    }
    sessionStorage.setItem("userId", userId);
    window.location.reload();
  });
  document.querySelector(".dark-btn").addEventListener("click", function () {
    document.body.classList.toggle("dark");
  });
  document.querySelector(".lng-btn").addEventListener("click", function () {
    locale = locale === 'uk' ? 'en' : 'uk';
    sessionStorage.setItem("locale", locale);
    window.location.reload();
  });
})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiX3Nlc3Npb25TdG9yYWdlJGdldEl0IiwiX051bWJlciIsImFwaVVSTCIsIlBST01PX1NUQVJUX0RBVEUiLCJEYXRlIiwiY3VycmVudERhdGUiLCJ3ZWVrRGF0ZXMiLCJ3ZWVrTnVtcyIsInByaXplRnVuZHMiLCJmb3JtYXREYXRlIiwiZGF0ZSIsImNvbmNhdCIsImdldERhdGUiLCJ0b1N0cmluZyIsInBhZFN0YXJ0IiwiZ2V0TW9udGgiLCJpIiwic3RhcnQiLCJnZXRUaW1lIiwiZW5kIiwic2V0SG91cnMiLCJwZXJpb2QiLCJwcml6ZUZ1bmQiLCJsZW5ndGgiLCJjb25zb2xlIiwibG9nIiwidW5hdXRoTXNncyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsInBhcnRpY2lwYXRlQnRucyIsInBsYXlCdG5zIiwibWFpblBhZ2UiLCJxdWVyeVNlbGVjdG9yIiwidGFic0NvbnRhaW5lciIsIndlZWtBbW91bnQiLCJ1a0xlbmciLCJlbkxlbmciLCJsb2NhbGUiLCJzZXNzaW9uU3RvcmFnZSIsImdldEl0ZW0iLCJpMThuRGF0YSIsInVzZXJJZCIsImRlYnVnIiwiTnVtYmVyIiwiY2hlY2tVc2VyQXV0aCIsIl9pdGVyYXRvciIsIl9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIiwiX3N0ZXAiLCJzIiwibiIsImRvbmUiLCJ1bmF1dGhNZXMiLCJ2YWx1ZSIsImNsYXNzTGlzdCIsImFkZCIsImVyciIsImUiLCJmIiwicmVxdWVzdCIsInRoZW4iLCJkYXRhIiwidXNlciIsImZpbmQiLCJ1c2VyaWQiLCJfaXRlcmF0b3IyIiwiX3N0ZXAyIiwicGxheUJ0biIsInJlbW92ZSIsIl9pdGVyYXRvcjMiLCJfc3RlcDMiLCJwYXJ0aWNpcGF0ZUJ0biIsIl9pdGVyYXRvcjQiLCJfc3RlcDQiLCJfaXRlcmF0b3I1IiwiX3N0ZXA1IiwiX2l0ZXJhdG9yNiIsIl9zdGVwNiIsIl9pdGVyYXRvcjciLCJfc3RlcDciLCJJbml0UGFnZSIsInRyYW5zbGF0ZSIsInJlbmRlclRhYnMiLCJwYXJ0aWNpcGF0ZSIsInBhcmFtcyIsImZldGNoIiwiaGVhZGVycyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicmVzIiwianNvbiIsIl9pdGVyYXRvcjgiLCJfc3RlcDgiLCJqb2luQnRuIiwibG9hZFRyYW5zbGF0aW9ucyIsIm11dGF0aW9uT2JzZXJ2ZXIiLCJNdXRhdGlvbk9ic2VydmVyIiwibXV0YXRpb25zIiwib2JzZXJ2ZSIsImdldEVsZW1lbnRCeUlkIiwiY2hpbGRMaXN0Iiwic3VidHJlZSIsImVsZW1zIiwiZm9yRWFjaCIsImVsZW0iLCJrZXkiLCJnZXRBdHRyaWJ1dGUiLCJpbm5lckhUTUwiLCJ0cmFuc2xhdGVLZXkiLCJyZW1vdmVBdHRyaWJ1dGUiLCJkZWZhdWx0VmFsdWUiLCJsaW5rIiwiY29udGFpbmVyIiwiZGVmYXVsdFRhYiIsInRhYiIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsInNldEF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIiwidGFicyIsImluaXQiLCJ3aW5kb3ciLCJzdG9yZSIsInN0YXRlIiwiZ2V0U3RhdGUiLCJhdXRoIiwiaXNBdXRob3JpemVkIiwiaWQiLCJjIiwic2V0SW50ZXJ2YWwiLCJnX3VzZXJfaWQiLCJjbGVhckludGVydmFsIiwiX2l0ZXJhdG9yOSIsIl9zdGVwOSIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJjbG9zZXN0IiwiYWxsVGFicyIsIml0ZW0iLCJ0YWJXZWVrIiwid2VsY29tZUxvZ28iLCJ3ZWxjb21lVGV4dCIsIndlbGNvbWVQcml6ZSIsInNldFRpbWVvdXQiLCJzZXRJdGVtIiwibG9jYXRpb24iLCJyZWxvYWQiLCJ0b2dnbGUiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUMsV0FBQUEscUJBQUEsRUFBQUMsT0FBQSxFQUFVO0VBQ1AsSUFBTUMsTUFBTSxHQUFHLHFDQUFxQztFQUVwRCxJQUFNQyxnQkFBZ0IsR0FBRyxJQUFJQyxJQUFJLENBQUMscUJBQXFCLENBQUM7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Y0FBYyxDQUFDMkcsT0FBTyxDQUFDLFFBQVEsRUFBRXhHLE1BQU0sQ0FBQztJQUN4Q2lGLE1BQU0sQ0FBQ3dCLFFBQVEsQ0FBQ0MsTUFBTSxDQUFDLENBQUM7RUFDNUIsQ0FBQyxDQUFDO0VBQ0Z4SCxRQUFRLENBQUNLLGFBQWEsQ0FBQyxXQUFXLENBQUMsQ0FBQ3VHLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxZQUFLO0lBQy9ENUcsUUFBUSxDQUFDNEQsSUFBSSxDQUFDbEMsU0FBUyxDQUFDK0YsTUFBTSxDQUFDLE1BQU0sQ0FBQztFQUMxQyxDQUFDLENBQUM7RUFFRnpILFFBQVEsQ0FBQ0ssYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDdUcsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFlBQU07SUFDL0RsRyxNQUFNLEdBQUdBLE1BQU0sS0FBSyxJQUFJLEdBQUcsSUFBSSxHQUFHLElBQUk7SUFDdENDLGNBQWMsQ0FBQzJHLE9BQU8sQ0FBQyxRQUFRLEVBQUU1RyxNQUFNLENBQUM7SUFDeENxRixNQUFNLENBQUN3QixRQUFRLENBQUNDLE1BQU0sQ0FBQyxDQUFDO0VBQzVCLENBQUMsQ0FBQztBQUVOLENBQUMsRUFBQyxDQUFDIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtcbiAgICBjb25zdCBhcGlVUkwgPSAnaHR0cHM6Ly9mYXYtcHJvbS5jb20vYXBpX2x2bHVwXzIwMjUnO1xuXG4gICAgY29uc3QgUFJPTU9fU1RBUlRfREFURSA9IG5ldyBEYXRlKFwiMjAyNS0wNC0xNFQxMjowMDowMFwiKTtcbiAgICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKClcblxuICAgIGNvbnN0IHdlZWtEYXRlcyA9IFtdO1xuICAgIGxldCB3ZWVrTnVtcyA9IDA7XG4gICAgY29uc3QgcHJpemVGdW5kcyA9IFtgMzAwIDAwMGAsIGAzMDAgMDAwYCwgYDQwMCAwMDBgXTtcblxuICAgIGNvbnN0IGZvcm1hdERhdGUgPSAoZGF0ZSkgPT4ge1xuICAgICAgICByZXR1cm4gYCR7ZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9LiR7KGRhdGUuZ2V0TW9udGgoKSArIDEpXG4gICAgICAgICAgICAudG9TdHJpbmcoKVxuICAgICAgICAgICAgLnBhZFN0YXJ0KDIsIFwiMFwiKX1gO1xuICAgIH07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICBsZXQgc3RhcnQgPSBuZXcgRGF0ZShQUk9NT19TVEFSVF9EQVRFLmdldFRpbWUoKSArIGkgKiA3ICogMjQgKiA2MCAqIDYwICogMTAwMCk7XG4gICAgICAgIGxldCBlbmQgPSBuZXcgRGF0ZShzdGFydC5nZXRUaW1lKCkgKyA2ICogMjQgKiA2MCAqIDYwICogMTAwMCk7XG4gICAgICAgIGVuZC5zZXRIb3VycygyMywgNTksIDU5LCA5OTkpO1xuXG4gICAgICAgIHdlZWtEYXRlc1tpXSA9IHtcbiAgICAgICAgICAgIHN0YXJ0OiBzdGFydCxcbiAgICAgICAgICAgIGVuZDogZW5kLFxuICAgICAgICAgICAgcGVyaW9kOiBgJHtmb3JtYXREYXRlKHN0YXJ0KX0gLSAke2Zvcm1hdERhdGUoZW5kKX1gLFxuICAgICAgICAgICAgcHJpemVGdW5kOiBwcml6ZUZ1bmRzW2ldLFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChjdXJyZW50RGF0ZSA+PSBlbmQpIHtcbiAgICAgICAgICAgIHdlZWtOdW1zKys7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdlZWtEYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoY3VycmVudERhdGUgPj0gd2Vla0RhdGVzW2ldLnN0YXJ0ICYmIGN1cnJlbnREYXRlIDw9IHdlZWtEYXRlc1tpXS5lbmQpIHtcbiAgICAgICAgICAgIHdlZWtOdW1zID0gaSArIDE7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAod2Vla051bXMgPT09IDApIHtcbiAgICAgICAgaWYgKGN1cnJlbnREYXRlIDwgd2Vla0RhdGVzWzBdLnN0YXJ0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcItCQ0LrRhtGW0Y8g0YnQtSDQvdC1INC/0L7Rh9Cw0LvQsNGB0YxcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcItCQ0LrRhtGW0Y8g0LLQttC1INC30LDQutGW0L3Rh9C40LvQsNGB0YxcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcItCf0L7RgtC+0YfQvdC40Lkg0YLQuNC20LTQtdC90Yw6XCIsIHdlZWtOdW1zKTtcbiAgICBjb25zb2xlLmxvZyhcItCU0LXRgtCw0LvRliDRgtC40LbQvdGW0LI6XCIsIHdlZWtEYXRlcyk7XG5cblxuICAgIGNvbnN0XG4gICAgICAgIHVuYXV0aE1zZ3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudW5hdXRoLW1zZ3MnKSxcbiAgICAgICAgcGFydGljaXBhdGVCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvb2stcGFydCcpLFxuICAgICAgICBwbGF5QnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wbGF5LWJ0bicpLFxuICAgICAgICBtYWluUGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmF2LXBhZ2VcIiksXG4gICAgICAgIHRhYnNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJlc3VsdHNfX3RhYnNcIiksXG4gICAgICAgIHdlZWtBbW91bnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJlc3VsdHNfX3ByaXplLWFtb3VudFwiKTtcblxuICAgIGNvbnN0IHVrTGVuZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN1a0xlbmcnKTtcbiAgICBjb25zdCBlbkxlbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZW5MZW5nJyk7XG5cbiAgICBsZXQgbG9jYWxlID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcImxvY2FsZVwiKSA/PyAndWsnO1xuICAgIC8vIGxldCBsb2NhbGUgPSAgJ3VrJztcblxuICAgIGlmICh1a0xlbmcpIGxvY2FsZSA9ICd1ayc7XG4gICAgaWYgKGVuTGVuZykgbG9jYWxlID0gJ2VuJztcblxuICAgIGxldCBpMThuRGF0YSA9IHt9O1xuICAgIGxldCB1c2VySWQ7XG4gICAgY29uc3QgZGVidWcgPSBmYWxzZTtcblxuICAgIHVzZXJJZCA9IE51bWJlcihzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFwidXNlcklkXCIpKSA/PyAxMDAzMDAyNjggO1xuICAgIC8vIHVzZXJJZCA9IDEwMDMwMDI2OCA7XG5cbiAgICBjb25zdCBjaGVja1VzZXJBdXRoID0gKCkgPT4ge1xuICAgICAgICBpZiAodXNlcklkKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHVuYXV0aE1lcyBvZiB1bmF1dGhNc2dzKSB7XG4gICAgICAgICAgICAgICAgdW5hdXRoTWVzLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcXVlc3QoXCIvdXNlcnNcIikudGhlbihkYXRhID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyID0gZGF0YS5maW5kKHVzZXIgPT4gdXNlci51c2VyaWQgPT09IHVzZXJJZCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBsYXlCdG4gb2YgcGxheUJ0bnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlCdG4uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFydGljaXBhdGVCdG4gb2YgcGFydGljaXBhdGVCdG5zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWNpcGF0ZUJ0bi5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhcnRpY2lwYXRlQnRuIG9mIHBhcnRpY2lwYXRlQnRucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFydGljaXBhdGVCdG4uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGxheUJ0biBvZiBwbGF5QnRucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGxheUJ0bi5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhcnRpY2lwYXRlQnRuIG9mIHBhcnRpY2lwYXRlQnRucykge1xuICAgICAgICAgICAgICAgIHBhcnRpY2lwYXRlQnRuLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgdW5hdXRoTWVzIG9mIHVuYXV0aE1zZ3MpIHtcbiAgICAgICAgICAgICAgICB1bmF1dGhNZXMuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IEluaXRQYWdlID0gKCkgPT4ge1xuICAgICAgICBjaGVja1VzZXJBdXRoKClcbiAgICAgICAgdHJhbnNsYXRlKCk7XG4gICAgICAgIHJlbmRlclRhYnModGFic0NvbnRhaW5lcilcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJ0aWNpcGF0ZSgpIHtcbiAgICAgICAgaWYgKCF1c2VySWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHsgdXNlcmlkOiB1c2VySWQgfTtcbiAgICAgICAgY29uc29sZS5sb2cocGFyYW1zKVxuXG4gICAgICAgIGZldGNoKGFwaVVSTCArICcvdXNlci8nLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXJhbXMpXG4gICAgICAgIH0pLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKHJlcyA9PiB7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3Qgam9pbkJ0biBvZiBwYXJ0aWNpcGF0ZUJ0bnMpe1xuICAgICAgICAgICAgICAgIGpvaW5CdG4uY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgSW5pdFBhZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZFRyYW5zbGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke2FwaVVSTH0vbmV3LXRyYW5zbGF0ZXMvJHtsb2NhbGV9YCkudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgIC50aGVuKGpzb24gPT4ge1xuICAgICAgICAgICAgICAgIGkxOG5EYXRhID0ganNvbjtcbiAgICAgICAgICAgICAgICB0cmFuc2xhdGUoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IG11dGF0aW9uT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihtdXRhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbXV0YXRpb25PYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsdmxVcCcpLCB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc3VidHJlZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdHJhbnNsYXRlKCkge1xuICAgICAgICBjb25zdCBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXRyYW5zbGF0ZV0nKVxuICAgICAgICBpZiAoZWxlbXMgJiYgZWxlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZighZGVidWcpe1xuICAgICAgICAgICAgICAgIGVsZW1zLmZvckVhY2goZWxlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGVsZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXRyYW5zbGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICBlbGVtLmlubmVySFRNTCA9IHRyYW5zbGF0ZUtleShrZXkpO1xuICAgICAgICAgICAgICAgICAgICBlbGVtLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS10cmFuc2xhdGUnKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0cmFuc2xhdGlvbiB3b3JrcyFcIilcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxvY2FsZSA9PT0gJ2VuJykge1xuICAgICAgICAgICAgbWFpblBhZ2UuY2xhc3NMaXN0LmFkZCgnZW4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRyYW5zbGF0ZUtleShrZXksIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICBpZiAoIWtleSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZSB8fCBrZXk7XG4gICAgICAgIHJldHVybiBpMThuRGF0YVtrZXldIHx8IGRlZmF1bHRWYWx1ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXF1ZXN0IChsaW5rKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChhcGlVUkwgKyBsaW5rLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KS50aGVuKHJlcyA9PiByZXMuanNvbigpKTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIHJlbmRlclRhYnMgKGNvbnRhaW5lcil7XG4gICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiXG5cblxuICAgICAgICBsZXQgZGVmYXVsdFRhYiA9IGZhbHNlXG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3ZWVrRGF0ZXMubGVuZ3RoOyBpKyspe1xuXG4gICAgICAgICAgICBjb25zdCB0YWIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgdGFiLmNsYXNzTGlzdC5hZGQoXCJyZXN1bHRzX190YWJzLWl0ZW1cIilcbiAgICAgICAgICAgIHRhYi50ZXh0Q29udGVudCA9IGAke3dlZWtEYXRlc1tpXS5wZXJpb2R9YFxuXG4gICAgICAgICAgICBpZihpID09PSB3ZWVrTnVtcyAtIDEpe1xuICAgICAgICAgICAgICAgIGRlZmF1bHRUYWIgPSB0cnVlXG4gICAgICAgICAgICAgICAgdGFiLmNsYXNzTGlzdC5hZGQoXCJfYWN0aXZlXCIpXG4gICAgICAgICAgICAgICAgd2Vla0Ftb3VudC50ZXh0Q29udGVudCA9IGAke3dlZWtEYXRlc1tpXS5wcml6ZUZ1bmR9IOKCtGBcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGFiLnNldEF0dHJpYnV0ZShcImRhdGEtd2Vla1wiLCBpICsgMSlcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0YWIpXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0YWJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJlc3VsdHNfX3RhYnMtaXRlbScpXG5cblxuXG4gICAgICAgIGNvbnNvbGUubG9nKGRlZmF1bHRUYWIpXG4gICAgICAgIGlmKCFkZWZhdWx0VGFiKXtcbiAgICAgICAgICAgIHRhYnNbMF0uY2xhc3NMaXN0LmFkZChcIl9hY3RpdmVcIilcbiAgICAgICAgICAgIHdlZWtBbW91bnQudGV4dENvbnRlbnQgPSBgJHt3ZWVrRGF0ZXNbMF0ucHJpemVGdW5kfSDigrRgXG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIEluaXRQYWdlKCk7XG4gICAgICAgIGlmICh3aW5kb3cuc3RvcmUpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gd2luZG93LnN0b3JlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICB1c2VySWQgPSBzdGF0ZS5hdXRoLmlzQXV0aG9yaXplZCAmJiBzdGF0ZS5hdXRoLmlkIHx8ICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgYyA9IDA7XG4gICAgICAgICAgICB2YXIgaSA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoYyA8IDUwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuZ191c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQgPSB3aW5kb3cuZ191c2VyX2lkO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tVc2VyQXV0aCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgMjAwKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGpvaW5CdG4gb2YgcGFydGljaXBhdGVCdG5zKSB7XG4gICAgICAgICAgICBqb2luQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcGFydGljaXBhdGUoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2hlY2tVc2VyQXV0aCgpO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgY29uc3QgdGFiID0gZS50YXJnZXQuY2xvc2VzdCgnLnJlc3VsdHNfX3RhYnMtaXRlbScpO1xuICAgICAgICBpZiAoIXRhYikgcmV0dXJuO1xuICAgICAgICBjb25zdCBhbGxUYWJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJlc3VsdHNfX3RhYnMtaXRlbScpO1xuICAgICAgICBhbGxUYWJzLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ19hY3RpdmUnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRhYi5jbGFzc0xpc3QuYWRkKCdfYWN0aXZlJyk7XG4gICAgICAgIGNvbnN0IHRhYldlZWsgPSB0YWIuZ2V0QXR0cmlidXRlKCdkYXRhLXdlZWsnKVxuXG4gICAgICAgIHdlZWtBbW91bnQudGV4dENvbnRlbnQgPSBgJHt3ZWVrRGF0ZXNbdGFiV2VlayAtIDFdLnByaXplRnVuZH0g4oK0YFxuXG5cblxuICAgICAgICBjb25zb2xlLmxvZyh0YWJXZWVrKVxuICAgIH0pO1xuXG4gICAgbG9hZFRyYW5zbGF0aW9ucygpXG4gICAgICAgIC50aGVuKGluaXQpO1xuXG4gICAgY29uc3Qgd2VsY29tZUxvZ28gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndlbGNvbWVfX2xvZ29cIiksXG4gICAgICAgICAgd2VsY29tZVRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndlbGNvbWVfX3RleHRcIiksXG4gICAgICAgICAgd2VsY29tZVByaXplID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53ZWxjb21lX19wcml6ZVwiKTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT57XG4gICAgICAgIHdlbGNvbWVMb2dvLmNsYXNzTGlzdC5yZW1vdmUoXCJ0b3BBbmltSGlkZVwiKVxuICAgICAgICB3ZWxjb21lTG9nby5jbGFzc0xpc3QuYWRkKFwidG9wQW5pbVNob3dcIilcbiAgICB9LCAyNTApXG4gICAgc2V0VGltZW91dCgoKSA9PntcbiAgICAgICAgd2VsY29tZVRleHQuY2xhc3NMaXN0LnJlbW92ZShcInRvcEFuaW1IaWRlXCIpXG4gICAgICAgIHdlbGNvbWVUZXh0LmNsYXNzTGlzdC5hZGQoXCJ0b3BBbmltU2hvd1wiKVxuICAgIH0sIDUwMClcbiAgICBzZXRUaW1lb3V0KCgpID0+e1xuICAgICAgICB3ZWxjb21lUHJpemUuY2xhc3NMaXN0LnJlbW92ZShcInRvcEFuaW1IaWRlXCIpXG4gICAgICAgIHdlbGNvbWVQcml6ZS5jbGFzc0xpc3QuYWRkKFwidG9wQW5pbVNob3dcIilcbiAgICB9LCA3NTApXG5cblxuICAgIC8vdGVzdFxuXG5cblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYXV0aC1idG5cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdXNlcklkID0gTnVtYmVyKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXCJ1c2VySWRcIikpIHx8IDA7XG5cbiAgICAgICAgaWYgKHVzZXJJZCA9PT0gMTAwMzAwMjY4KSB7XG4gICAgICAgICAgICB1c2VySWQgPSAzMjExMjMzMjE7XG4gICAgICAgIH0gZWxzZSBpZiAodXNlcklkID09PSAzMjExMjMzMjEpIHtcbiAgICAgICAgICAgIHVzZXJJZCA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1c2VySWQgPSAxMDAzMDAyNjg7XG4gICAgICAgIH1cblxuICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwidXNlcklkXCIsIHVzZXJJZCk7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRhcmstYnRuXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PntcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKFwiZGFya1wiKVxuICAgIH0pXG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxuZy1idG5cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgbG9jYWxlID0gbG9jYWxlID09PSAndWsnID8gJ2VuJyA6ICd1ayc7XG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXCJsb2NhbGVcIiwgbG9jYWxlKTtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG4gICAgfSk7XG5cbn0oKSkiXX0=
